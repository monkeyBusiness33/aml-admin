{% extends "layouts/base-fullscreen.html" %}
{% load i18n static %}

{% block title %} AML Operations Portal Login {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

  <!-- Section -->
  <section class="vh-100 bg-soft d-flex align-items-center bg-primary">
    <div class="container">
      <div class="row justify-content-center form-bg-image">
        <div class="col-12 d-flex align-items-center justify-content-center">
          <div class="bg-white shadow border-0 rounded border-light p-5 w-100 fmxw-500">
            <div class="text-center text-md-center mb-2 mt-md-0">
              <img class="mb-3" src="{% static 'assets/img/aml_logo_v3_cut.png' %}" alt="Logo" width="250px">
              <h1 class="mt-3 h3">AML Operations Portal Login</h1>
              <span class="mb-0 text-muted">
                {% if wizard.steps.current == 'auth' %}
                  <p>{% blocktrans %}Enter your credentials.{% endblocktrans %}</p>
                {% elif wizard.steps.current == 'token' %}
                  {% if device.method == 'call' %}
                    <p>{% blocktrans trimmed %}We are calling your phone right now, please enter the
                      digits you hear.{% endblocktrans %}</p>
                  {% elif device.method == 'sms' %}
                    <p>{% blocktrans trimmed %}We sent you a text message, please enter the tokens
                      we
                      sent.{% endblocktrans %}</p>
                  {% else %}
                    <p>{% blocktrans trimmed %}Please enter the tokens generated by your token
                      generator.{% endblocktrans %}</p>
                  {% endif %}
                {% elif wizard.steps.current == 'backup' %}
                  <p>{% blocktrans trimmed %}Use this form for entering backup tokens for logging
                    in.
                    These tokens have been generated for you to print and keep safe. Please
                    enter one of these backup tokens to login to your
                    account.{% endblocktrans %}</p>
                {% endif %}
              </span>
            </div>
            <form method="post" action="" class="mt-4">

              {% csrf_token %}
              {{ wizard.management_form }}

              <div class="form-group">
                {% if wizard.form.username %}
                  <div class="form-group mb-4">
                    <label for="{{ wizard.form.username.id_for_label }}">{{ wizard.form.username.label }}</label>
                    <div class="input-group">
                      <span class="input-group-text" id="{{ wizard.form.username.id }}"><span
                        class="fas fa-user text-gray-600"></span></span>
                      {{ wizard.form.username }}
                    </div>
                  </div>
                {% endif %}

                {% if wizard.form.password %}
                  <div class="form-group mb-4">
                    <label for="{{ wizard.form.password.id_for_label }}">{{ wizard.form.password.label }}</label>
                    <div class="input-group">
                      <span class="input-group-text" id="{{ wizard.form.password.id }}"><span
                        class="fas fa-lock text-gray-600"></span></span>
                      {{ wizard.form.password }}
                    </div>
                  </div>
                {% endif %}

                {% if wizard.form.otp_token %}
                  <div class="form-group mb-4">
                    <label for="{{ wizard.form.otp_token.id_for_label }}">{{ wizard.form.otp_token.label }}</label>
                    <div class="input-group">
                      <span class="input-group-text" id="{{ wizard.form.otp_token.id }}"><span
                        class="fas fa-key text-gray-600"></span></span>
                      {{ wizard.form.otp_token }}
                    </div>
                  </div>
                {% endif %}
                {# hidden submit button to enable [enter] key #}
                <input type="submit" value="" class="d-none"/>

{#                {% if other_devices %}#}
{#                  <p>{% trans "Or, alternatively, use one of your backup phones:" %}</p>#}
{#                  <p>#}
{#                    {% for other in other_devices %}#}
{#                      <button name="challenge_device" value="{{ other.persistent_id }}"#}
{#                              class="btn btn-secondary btn-block" type="submit">#}
{#                        {{ other|device_action }}#}
{#                      </button>#}
{#                    {% endfor %}</p>#}
{#                {% endif %}#}
                {% if backup_tokens %}
                  <p>{% trans "As a last resort, you can use a backup token:" %}</p>
                  <p>
                    <button name="wizard_goto_step" type="submit" value="backup"
                            class="btn btn-secondary btn-block">{% trans "Use Backup Token" %}</button>
                  </p>
                {% endif %}
                {{ wizard.form.non_field_errors }}
                <div class="d-grid">
                  <button type="submit" class="btn btn btn-primary">{% trans "Next" %}</button>
                </div>

            </form>
            <br/>
            <div class="d-flex justify-content-center align-items-center mt-4">
              <span class="fw-normal">
                  <a href="https://www.amlglobal.net/" target="_blank">AML Global Limited</a>
              </span>
            </div>

          </div>
        </div>
      </div>
    </div>
  </section>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}
